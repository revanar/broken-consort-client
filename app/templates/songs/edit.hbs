<h2>Edit Songs</h2>

<div class="edit-table-box table-responsive">
  <div class="edit-table header">
    <div class="song-book">Book</div>
    <div class="song-no">Song No.</div>
    <div class="song-name">Name</div>
    <div class="song-composer">Composer</div>
    <div class="song-parts-no">No. of Parts</div>
    <div class="song-languages">Languages</div>
    <div class="song-tags">Tags</div>
    <div class="edit-button">PDF</div>
  </div>
  {{#each model.songs as |song|}}
    <div class="edit-table item input-group-sm" {{action "autoSave" "song" on="change"}}>
        <label for="song-book-{{song.id}}" class="sr-only">Book</label>
        {{#power-select
          id=(concat "song-book-" song.id)
          tagName="div"
          class="song-book"
          selected=song.book
          options=model.books
          placeholder="unknown book"
          onchange=(action "updateOne" "song" song "book")
          searchField="name"
        as |book|
        }}
          {{book.name}} by {{book.editor.name}} ({{book.year}})
        {{/power-select}}
        <label for="song-no-{{song.id}}" class="sr-only">Song No.</label>
        {{input
          id=(concat "song-no-" song.id)
          class="song-no form-control"
          type="number" min="1" max="99"
          value=song.song_no
          placeholder="?"
        }}
        <label for="song-name-{{song.id}}" class="sr-only">Name</label>
        {{input
          id=(concat "song-name-" song.id)
          class="song-name form-control"
          value=song.name
          placeholder="unknown name"
        }}
        <label for="song-composer-{{song.id}}" class="sr-only">Composer</label>
        {{#power-select-with-create
          id=(concat "song-composer-" song.id)
          tagName="div"
          class="song-composer"
          selected=song.composer
          options=model.composers
          placeholder="unknown composer"
          onchange=(action "updateOne" "song" song "composer")
          oncreate=(action "createOne" "song" song "composer")
          searchField="name"
        as |composer|
        }}
          {{composer.name}}
        {{/power-select-with-create}}
        <label for="song-parts-no-{{song.id}}" class="sr-only">Number of Parts</label>
        {{input
          id=(concat "song-parts-no-" song.id)
          class="song-parts-no form-control"
          type="number" min="1" max="9"
          value=song.parts_no
          placeholder="?"
        }}
        <label for="song-languages-{{song.id}}" class="sr-only">Languages</label>
        {{#power-select-multiple
          id=(concat "song-languages-" song.id)
          tagName="div"
          class="song-languages"
          selected=song.languages
          options=model.languages
          placeholder="no languages"
          onchange=(action "updateMany" "song" song "language")
          onkeydown=(action "createMany" "song" song "language")
          searchField="name"
          as |language|
        }}
          {{language.name}}
        {{/power-select-multiple}}
        <label for="song-tags-{{song.id}}" class="sr-only">Tags</label>
        {{#power-select-multiple
          id=(concat "song-tags-" song.id)
          tagName="div"
          class="song-tags"
          selected=song.tags
          options=model.tags
          placeholder="no tags"
          onchange=(action "updateMany" "song" song "tag")
          onkeydown=(action "createMany" "song" song "tag")
          searchField="name"
          as |tag|
        }}
          {{tag.name}}
        {{/power-select-multiple}}
        {{file-uploader data-toggle="buttons" model=song}}
        {{#delete-button classes="btn-sm" name=song.name onconfirm=(action "deleteRecord" song)}}Delete{{/delete-button}}
    </div>
  {{/each}}
</div>

<button class="btn btn-default" {{action "createRecord" "song"}}>Create New Song</button>


